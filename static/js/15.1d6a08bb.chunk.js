(this["webpackJsonpdx-app"]=this["webpackJsonpdx-app"]||[]).push([[15],{185:function(e,a,t){"use strict";a.a=t.p+"static/media/user_img.f957c3a0.png"},357:function(e,a,t){"use strict";t.r(a);var r=t(184),l=t(0),n=t.n(l),s=(t(200),t(185)),c=t(50),i=t(25),o=t(64),m=t(49),d=t(5),p=(t(196),t(34)),g=t(35),u=t(38),v=t(37),h=t(290),E=function(e){Object(u.a)(t,e);var a=Object(v.a)(t);function t(e){var r;return Object(p.a)(this,t),(r=a.call(this,e)).state={directions:null,error:null},r}return Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.places,r=a.travelMode;if(t&&null!==t&&void 0!==t){var l=t.map((function(e){return{location:{lat:e.lat,lng:e.lng},stopover:!0}})),n=l.shift().location,s=l.pop().location,c=new google.maps.DirectionsService,i=null;i=t.length<=2?{origin:n,destination:s,travelMode:r}:{origin:n,destination:s,travelMode:r,waypoints:l},c.route(i,(function(a,t){t===google.maps.DirectionsStatus.OK&&e.setState({directions:a})}))}}},{key:"render",value:function(){return this.state.error?n.a.createElement("h1",null,this.state.error):this.state.directions&&n.a.createElement(h.DirectionsRenderer,{options:{suppressMarkers:!0},directions:this.state.directions})}}]),t}(n.a.Component),f=Object(h.withScriptjs)(Object(h.withGoogleMap)((function(e){return n.a.createElement(h.GoogleMap,{defaultCenter:e.defaultCenter,defaultZoom:e.defaultZoom},e.markers.map((function(e,a){return n.a.createElement(h.Marker,{labelStyle:{color:"white",fontWeight:"800"},key:a,position:{lat:parseFloat(e.lat),lng:parseFloat(e.lng)}})})),n.a.createElement(h.Marker,{labelStyle:{color:"white",fontWeight:"800"},label:{text:"Driver",color:"white",fontWeight:"800"},position:{lat:parseFloat(e.driverMarker.lat),lng:parseFloat(e.driverMarker.lng)}}),n.a.createElement(E,{places:e.markers,travelMode:google.maps.TravelMode.DRIVING}))}))),b=t(18);a.default=Object(d.f)((function(e){var a=Object(l.useState)({dealer:{},driver:{}}),t=Object(r.a)(a,2),d=t[0],p=t[1],g=Object(l.useState)([]),u=Object(r.a)(g,2),v=u[0],h=u[1],E=Object(l.useState)({lat:"",lng:""}),N=Object(r.a)(E,2),x=N[0],y=N[1];Object(l.useEffect)((function(){w(),o.a.on("driver-coords",(function(a){console.log("tracking",a),a.orderId==e.match.params.id&&y({lat:a.latitude,lng:a.longitude})}))}),[]);var w=function(){m.a.admin.getOrderbyId(e.match.params.id).then((function(e){var a=e.data;p(a),h([{lat:a.dealer.lat,lng:a.dealer.long},{lat:a.dropCoords.lat,lng:a.dropCoords.long}])})).catch((function(e){e.response})).finally((function(){}))};return n.a.createElement("div",{className:"mian-wrap-user ml-5"},n.a.createElement("div",{className:"p-3 mt-5"},n.a.createElement("div",{className:"card-cus-header text-center bg-cus-primary text-white"},n.a.createElement("p",{className:"mb-0 text-uppercase"},"Live DX Tracking")),d.dealer.lat&&n.a.createElement("div",{className:"tracking-map"},n.a.createElement(f,{markers:v,driverMarker:x,defaultZoom:8,googleMapURL:"https://maps.googleapis.com/maps/api/js?key="+b.a+"&callback=initMap&libraries=geometry,drawing,places",loadingElement:n.a.createElement("div",{style:{height:"100%"}}),containerElement:n.a.createElement("div",{style:{height:"75vh"}}),mapElement:n.a.createElement("div",{style:{height:"100%"}}),defaultCenter:{lat:d.dealer.lat,lng:d.dealer.long}})),n.a.createElement("div",{className:"d-flex align-items-center bg-white px-2"},n.a.createElement("div",{className:"tracker-image"},n.a.createElement("img",{width:"40px",height:"40px",className:"rounded-circle",src:d.dealer.image||s.a})),n.a.createElement("div",{className:"user-info-rating"},n.a.createElement("p",{className:"text-cus-primary pl-2 mb-0 font-700",style:{fontsize:"14px"}},d.dealer.fullname),n.a.createElement("div",{className:"stars-ratings pl-2"},n.a.createElement(c.a,{className:"active",icon:i.m}),n.a.createElement(c.a,{className:"active",icon:i.m}),n.a.createElement(c.a,{className:"active",icon:i.m}),n.a.createElement(c.a,{className:"active",icon:i.m}),n.a.createElement(c.a,{icon:i.m}))),n.a.createElement("div",{className:"d-flex flex-wrap pl-2 mt-2",style:{flex:1}},n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement("div",{className:"company-image"},n.a.createElement("img",{width:"20px",className:"rounded-circle",height:"20px",src:d.dealer.image||s.a})),n.a.createElement("div",{className:"company-text pl-1"},n.a.createElement("p",{className:"mb-0"},d.dealer.address))),n.a.createElement("div",{className:"d-flex ml-auto align-items-center"},n.a.createElement("div",{className:"company-image"},n.a.createElement("img",{width:"20px",className:"rounded-circle",height:"20px",src:d.driver.image||s.a})),n.a.createElement("div",{className:"company-text pl-1"},n.a.createElement("p",{className:"mb-0"},d.dropCoords?d.dropCoords.address:null))),n.a.createElement("div",{className:"w-100 progress-bar-sec mt-2"},n.a.createElement("div",{className:"progress-route w-100"},n.a.createElement("div",{className:"progress-bar-width bg-cus-success",style:{width:"30%"}})),n.a.createElement("div",{className:"d-flex progress-label"},n.a.createElement("span",{className:"ml-auto"},"11:45PM")))))))}))}}]);
//# sourceMappingURL=15.1d6a08bb.chunk.js.map