{"version":3,"sources":["assets/img/user_img.png","components/MapDirectionsRenderer.js","components/dashboard/Dx_tracking.js"],"names":["MapDirectionsRenderer","props","state","directions","error","this","places","travelMode","undefined","waypoints","map","p","location","lat","lng","stopover","origin","shift","destination","pop","directionsService","google","maps","DirectionsService","options","length","route","result","status","DirectionsStatus","OK","setState","suppressMarkers","React","Component","Map","withScriptjs","withGoogleMap","defaultCenter","defaultZoom","markers","marker","index","labelStyle","color","fontWeight","key","position","parseFloat","label","text","driverMarker","TravelMode","DRIVING","withRouter","useState","dealer","driver","data","setData","setmarkers","setDriverMarker","useEffect","getDx","socket","on","console","log","orderId","match","params","id","latitude","longitude","Services","admin","getOrderbyId","then","response","json","long","dropCoords","catch","finally","className","googleMapURL","GoogleApiKey","loadingElement","style","height","containerElement","mapElement","width","src","image","user_avatar","fontsize","fullname","icon","faStar","flex","address"],"mappings":"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","file":"static/js/15.bebba36b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/user_img.f957c3a0.png\";","/* global google */\nimport React from 'react';\nimport {\n  withGoogleMap,\n  GoogleMap,\n  withScriptjs,\n  Marker,\n  DirectionsRenderer\n} from 'react-google-maps';\n\nclass MapDirectionsRenderer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      directions: null,\n      error: null\n    };\n  }\n\n  componentDidMount() {\n    const { places, travelMode } = this.props;\n    if (places && places !== null && places !== undefined) {\n      const waypoints = places.map(p => ({\n        location: { lat: p.lat, lng: p.lng },\n        stopover: true\n      }));\n      const origin = waypoints.shift().location;\n      const destination = waypoints.pop().location;\n\n      const directionsService = new google.maps.DirectionsService();\n      var options = null;\n      if (places.length <= 2) {\n        options = {\n          origin: origin,\n          destination: destination,\n          travelMode: travelMode\n        };\n      } else {\n        options = {\n          origin: origin,\n          destination: destination,\n          travelMode: travelMode,\n          waypoints: waypoints,\n\n        };\n      }\n      directionsService.route(options, (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          this.setState({\n            directions: result\n          });\n        } else {\n          //this.setState({ error: result });\n        }\n      });\n    }\n  }\n\n  render() {\n    if (this.state.error) {\n      return <h1>{this.state.error}</h1>;\n    }\n    return (\n      this.state.directions && (\n        <DirectionsRenderer options={{ suppressMarkers: true }} directions={this.state.directions} />\n      )\n    );\n  }\n}\n\nconst Map = withScriptjs(\n  withGoogleMap(props => (\n    <GoogleMap\n      defaultCenter={props.defaultCenter}\n      defaultZoom={props.defaultZoom}\n    >\n      {props.markers.map((marker, index) => {\n        return (\n          <Marker\n            labelStyle={{ color: \"white\", fontWeight: \"800\" }}\n            key={index}\n            // label={{\n            //   text: index + 1 + \"\",\n            //   color: \"white\",\n            //   fontWeight: \"800\"\n            // }}\n            position={{\n              lat: parseFloat(marker.lat),\n              lng: parseFloat(marker.lng)\n            }}\n          />\n        );\n      })}\n      <Marker\n        labelStyle={{ color: \"white\", fontWeight: \"800\" }}\n        label={{\n          text: \"Driver\",\n          color: \"white\",\n          fontWeight: \"800\"\n        }}\n        position={{\n          lat: parseFloat(props.driverMarker.lat),\n          lng: parseFloat(props.driverMarker.lng)\n        }}\n      />\n      <MapDirectionsRenderer\n        places={props.markers}\n        travelMode={google.maps.TravelMode.DRIVING}\n      />\n    </GoogleMap>\n  ))\n);\n\nexport default Map;\n","import React, { useState, useEffect } from \"react\";\nimport \"chart.js\";\nimport user_avatar from \"../../assets/img/user_img.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { socket } from \"../../services/socket\";\nimport Services from \"../../services\";\nimport { withRouter } from \"react-router\";\nimport moment from \"moment\";\nimport Map from '../MapDirectionsRenderer';\nimport { GoogleApiKey } from \"../../constant/keys\"\n\nfunction Dx_tracking(props) {\n  const [data, setData] = useState({ dealer: {}, driver: {} });\n  const [markers, setmarkers] = useState([]);\n  const [driverMarker, setDriverMarker] = useState({ lat: \"\", lng: \"\" })\n  useEffect(() => {\n    getDx();\n    socket.on(\"driver-coords\", (data) => {\n      console.log(\"tracking\", data)\n      if (data.orderId == props.match.params.id) {\n        setDriverMarker({ lat: data.latitude, lng: data.longitude })\n      }\n    });\n  }, [])\n\n  const getDx = () => {\n    // setLoading(true);\n    Services.admin\n      .getOrderbyId(props.match.params.id)\n      .then((response) => {\n        const json = response.data;\n        // setLoading(false);\n        setData(json);\n        setmarkers([{ lat: json.dealer.lat, lng: json.dealer.long }, { lat: json.dropCoords.lat, lng: json.dropCoords.long }]);\n      })\n      .catch((error) => {\n        const { response } = error;\n      })\n      .finally(() => {\n        // setLoading(false);\n      });\n  };\n\n  return (\n    <div className=\"mian-wrap-user ml-5\">\n      <div className=\"p-3 mt-5\">\n        <div className=\"card-cus-header text-center bg-cus-primary text-white\">\n          <p className=\"mb-0 text-uppercase\">Live DX Tracking</p>\n        </div>\n        {data.dealer.lat && <div className=\"tracking-map\">\n          <Map\n            markers={markers}\n            driverMarker={driverMarker}\n            defaultZoom={8}\n            googleMapURL={\n              'https://maps.googleapis.com/maps/api/js?key=' +\n              GoogleApiKey +\n              '&callback=initMap&libraries=geometry,drawing,places'\n            }\n            loadingElement={<div style={{ height: `100%` }} />}\n            containerElement={<div style={{ height: `75vh` }} />}\n            mapElement={<div style={{ height: `100%` }} />}\n            defaultCenter={{\n              lat: data.dealer.lat,\n              lng: data.dealer.long\n            }}\n          />\n          {/* <iframe\n            style={{ height: \"75vh\" }}\n            className=\"border-0\"\n            src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d26360909.888257876!2d-113.74875964478716!3d36.242299409623534!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x54eab584e432360b%3A0x1c3bb99243deb742!2sUnited%20States!5e0!3m2!1sen!2s!4v1603705448362!5m2!1sen!2s\"\n            width=\"100%\"\n            height=\"250\"\n            frameborder=\"0\"\n            allowfullscreen=\"\"\n            aria-hidden=\"false\"\n            tabindex=\"0\"\n          ></iframe> */}\n        </div>}\n        <div className=\"d-flex align-items-center bg-white px-2\">\n          <div className=\"tracker-image\">\n            <img\n              width=\"40px\"\n              height=\"40px\"\n              className=\"rounded-circle\"\n              src={data.dealer.image || user_avatar}\n            />\n          </div>\n          <div className=\"user-info-rating\">\n            <p\n              className=\"text-cus-primary pl-2 mb-0 font-700\"\n              style={{ fontsize: 14 + \"px\" }}\n            >\n              {data.dealer.fullname}\n            </p>\n            <div className=\"stars-ratings pl-2\">\n              <FontAwesomeIcon className=\"active\" icon={faStar} />\n              <FontAwesomeIcon className=\"active\" icon={faStar} />\n              <FontAwesomeIcon className=\"active\" icon={faStar} />\n              <FontAwesomeIcon className=\"active\" icon={faStar} />\n              <FontAwesomeIcon icon={faStar} />\n            </div>\n          </div>\n          <div className=\"d-flex flex-wrap pl-2 mt-2\" style={{ flex: 1 }}>\n            <div className=\"d-flex align-items-center\">\n              <div className=\"company-image\">\n                <img\n                  width=\"20px\"\n                  className=\"rounded-circle\"\n                  height=\"20px\"\n                  src={data.dealer.image || user_avatar}\n                />\n              </div>\n              <div className=\"company-text pl-1\">\n                <p className=\"mb-0\">{data.dealer.address}</p>\n              </div>\n            </div>\n            <div className=\"d-flex ml-auto align-items-center\">\n              <div className=\"company-image\">\n                <img\n                  width=\"20px\"\n                  className=\"rounded-circle\"\n                  height=\"20px\"\n                  src={data.driver.image || user_avatar}\n                />\n              </div>\n              <div className=\"company-text pl-1\">\n                <p className=\"mb-0\">{data.dropCoords ? data.dropCoords.address : null}</p>\n              </div>\n            </div>\n            <div className=\"w-100 progress-bar-sec mt-2\">\n              <div className=\"progress-route w-100\">\n                <div\n                  className=\"progress-bar-width bg-cus-success\"\n                  style={{ width: 30 + \"%\" }}\n                ></div>\n              </div>\n              <div className=\"d-flex progress-label\">\n                {/* <span>{moment(data.pickupTime).format(\"hh:mm A\")}</span> */}\n                <span className=\"ml-auto\">11:45PM</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div></div>\n  );\n}\n\nexport default withRouter(Dx_tracking);\n"],"sourceRoot":""}